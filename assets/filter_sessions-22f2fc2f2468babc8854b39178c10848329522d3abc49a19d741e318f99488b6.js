!function(e){function i(){var i={};if(""===window.location.search)return i;var n=window.location.search.substring(1).split("&");return e.each(n,function(e,n){var t=n.split("=")[0],s=unescape(n.split("=")[1]);s&&(i[t]=s.split(","))}),i}function n(e){return/enrollment/.test(e)?"enrollments":e}function t(i){function n(i,n){var t=s(i,n),o=!1;if(e.each(t,function(i,t){if(t&&""!==t){o=!0;var s=[],l="data-hc-"+i.replace(/_/g,"-");e.each(t.split(","),function(e,i){s.push("["+l+'~="'+i+'"]')}),e(".filtered_collection .filterable:not(.child,"+s.join(",")+")",n).hide(),e(".filtered_collection .healcode-summary-course",n).filter(":hidden").nextUntil(":not(.child)").hide()}}),o){var l=e(".filtered_collection .no_classes",n);e.each(l,function(i,n){e(n).hide()})}n.is(":visible")&&e.each(e(".schedule_header",n),function(i,t){0===e(t).nextUntil(".schedule_header",n).filter(":visible").length&&e(t).hide()})}function t(i){e(".filtered_collection .filterable:hidden",i).show(),e(".filtered_collection .no_classes:hidden",i).show(),e(".schedule_header:hidden",i).show()}function s(i,n){delete i.params.date;var t={},s=i.params;return e.each(e(".filters select",n),function(e,i){var n=s[i.id],o=n||i.value;t[i.id]=o}),e.each(e(".filters .checkboxes",n),function(i,n){var s=[];e.each(e("input:checked",n),function(e,i){s.push(i.value)}),t[n.id]=s.join(",")}),"all"===String(t.location)&&delete t.location,t}this.params=i,this.cleanParams=function(){var i=["mbo_class","class_level","trainer","sub_trainer","location","resource","visit_type","classes","type_group"],n=this.params;e.each(this.params,function(t){e.inArray(t,i)&&delete n[t]})},this.filter=function(i){e("#spinner",i).show(),t(i),n(this,i),e("#spinner",i).hide()}}function s(e,s,o){var l=i();s=n(s);var c=new t(l);c.cleanParams(),c.filter(o),window.hcFilterSessions.filters[e+"_"+s]=c}function o(e,i,t){i=n(i);var s=window.hcFilterSessions.filters[e+"_"+i];s?s.filter(t):console.log("SessionFilter for "+i+" widget "+e+" not found")}window.hcFilterSessions||(window.hcFilterSessions={},window.hcFilterSessions.filters={}),window.hcFilterSessions.addNewSessionFilter=s,e(document).ready(function(){e("body").on("change",'.healcode .filters select:not([name="location"]), .healcode .filters input[type="checkbox"]',function(){updatePrintUrl(this);var i=e(this).closest(".healcode");return o(i.attr("id"),i.attr("data-widget-name"),i),!1})})}(hcjq);