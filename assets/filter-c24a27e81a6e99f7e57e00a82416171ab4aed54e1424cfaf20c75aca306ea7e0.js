function Filter(t,e,i){const n=this;this.select=document.querySelector(t),this.attr="bwWidget"+this.select.dataset.attr,this.collection=this.select.dataset.collection,this.datalist=JSON.parse(e),this.filters=[],this.newOptions=[],this.selectedOpt=this.select.selectedOptions[0],this.widget=document.getElementById(i),this.createList=function(){const t=function(t){return null!==t.offsetParent},e=function(t){return parseInt(t.dataset[n.attr],10)},i=function(t,e,i){return i.indexOf(t)===e},s=Array.prototype.slice.call(n.widget.querySelectorAll(".bw-session")).filter(t).map(e).filter(i),c=this.datalist[n.collection].filter(function(t){return""===t.id||s.indexOf(parseInt(t.id,10))>=0});n.filters=c},this.clearSelect=function(){n.select.innerHTML=""},this.createOptions=function(){const t=n.filters.map(function(t){const e=document.createElement("option");return e.setAttribute("value",t.id),e.innerText=t.name,e}).sort(function(t,e){return""===t.value?-1:t.text.toLowerCase()>e.text.toLowerCase()?1:0});n.options=t},this.renderSelect=function(){n.options.forEach(function(t,e,i){n.selectedOpt&&t.value===n.selectedOpt.value&&(t.selected="selected"),0===e?n.select.appendChild(t):i[e].value!==i[e-1].value&&n.select.appendChild(t)})},this.init=function(){"undefined"!=typeof this.datalist[n.collection]&&(n.createList(),n.clearSelect(),n.createOptions(),n.renderSelect())}}