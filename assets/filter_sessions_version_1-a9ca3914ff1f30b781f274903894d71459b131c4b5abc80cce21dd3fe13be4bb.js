!function(e){function t(){var t={};if(""===window.location.search)return t;var i=window.location.search.substring(1).split("&");return e.each(i,function(e,i){var n=i.split("=")[0],s=unescape(i.split("=")[1]);s&&(t[n]=s.split(","))}),t}function i(e){return/enrollment/.test(e)?"enrollments":e}function n(t){function i(t,i){var n=s(t,i),o=!1;if(e.each(n,function(t,n){if(n&&""!==n){o=!0;var s=[],a="data-bw-widget-"+t.replace(/_/g,"-");e.each(n.split(","),function(e,t){s.push("["+a+'~="'+t+'"]')}),e(".bw-widget__sessions .bw-session:not(.child,"+s.join(",")+")",i).hide()}}),o){const t=e(".bw-widget__sessions .no_classes",i);e.each(t,function(t,i){e(i).hide()})}i.is(":visible")&&e.each(e(".bw-widget__date",i),function(t,n){0===e(n).nextUntil(".bw-widget__date",i).filter(":visible").length&&e(n).hide()})}function n(t){e(".bw-widget__sessions .bw-session:hidden",t).show(),e(".bw-widget__sessions .no_classes:hidden",t).show(),e(".bw-widget__date:hidden",t).show()}function s(t,i){delete t.params.date;var n={},s=t.params;return e.each(e(".bw-filters select",i),function(e,t){var i=s[t.dataset.collection],o=i||t.value;n[t.dataset.collection]=o}),e.each(e(".bw-filters .bw-filters__checkboxes",i),function(t,i){var s=[];e.each(e("input:checked",i),function(e,t){s.push(t.value)}),n[i.dataset.collection]=s.join(",")}),"all"===String(n.location)&&delete n.location,n}this.params=t,this.cleanParams=function(){var t=["mbo_class","class_level","trainer","sub_trainer","location","resource","visit_type","classes","type_group"],i=this.params;e.each(this.params,function(n){e.inArray(n,t)&&delete i[n]})},this.filter=function(t){e("#spinner",t).show(),n(t),i(this,t),e("#spinner",t).hide(),e.event.trigger("widget:appliedFilters",[t])}}function s(e,s,o){var a=t();s=i(s);var r=new n(a);r.cleanParams(),r.filter(o),window.bwFilterSessions.filters[e+"_"+s]=r}function o(e){var t=e.attr("id"),n=i(e.attr("data-widget-name")),s=window.bwFilterSessions.filters[t+"_"+n];s?s.filter(e):console.log("SessionFilter for "+n+" widget "+t+" not found")}window.bwFilterSessions||(window.bwFilterSessions={},window.bwFilterSessions.filters={}),window.bwFilterSessions.addNewSessionFilter=s,e(document).ready(function(){e("body").on("change",'.bw-widget .bw-filters select, .bw-widget .bw-filters input[type="checkbox"]',function(){return"undefined"!=typeof hcjq&&updatePrintUrl(this),o(e(this).closest(".bw-widget")),!1}),document.addEventListener("widget:updated",function(t){return o(e(t.target)),!1})})}("undefined"==typeof hcjq?jQuery:hcjq);